{"name":"petitóJPEG","tagline":"A high performance JPEG Encoder written in JavaScript","body":"petitóJPEG ® \r\n============\r\n### by Alberto Vigata ###\r\n\r\n## A high performance JPEG Encoder written in JavaScript ##\r\n\r\npetitóJPEG is a high performance JPEG encoder written in JavaScript. It can encode huge images (~64 Megapixels) in about 1000ms with contemporary CPUs. It is not a port from C code and it's a direct write into JS. The encoder makes pervasive use of TypedArrays so you'll need an interpreter that supports this.\r\n\r\n## Usage ##\r\nThe encoder accepts images in RGBA format which happens to be the format that of the ImageData object used in canvas. \r\n\r\n1) Provide the byte writer object. This is where the compressed data will be written to. There is a default ByteWriter object you can use that writes the result into a memory buffer you can later retrieve.\r\n\r\n```javascript\r\nvar encoder = new pttJPEG();\r\n\r\n// use default byte writer\r\nvar bw = new encoder.ByteWriter();\r\n\r\n// or roll your own\r\nvar myByteWriter = function() {\r\n    // write gets called every time there is data available from the encoder\r\n    // array is a Uint8Array. The data to be written starts at the 'start' position\r\n    // and there are 'count' bytes to write\r\n    this.write = function( array, start, count ) {\r\n        ...\r\n    };\r\nvar bw = new myByteWriter();\r\n```\r\n\r\n2) Wrap the image to be encoded in a pttImage object\r\n```javascript\r\n//pttImage constructor accepts an ImageData object as return by the \r\n// getImageData() of the canvas context so you can just:\r\n\r\nvar inImage = new encoder.pttImage( myImageDataObject );\r\n```\r\n3) Fire up the encoder\r\n```javascript\r\nvar quality = 50; //a number between 1-99, 1: best compression-worst quality, 99: least compression-best quality\r\n\r\nencoder.encode( quality, inImage, bw );\r\n// this encodes the picture and keeps calling your bytewriter when there is data available. On exit\r\n// all data has been written out to the bytewriter\r\n```\r\n\r\nThere are a couple of samples provided. \r\n* `sample_html.html` Loads an image from the DOM into a ImageData and encodes it with petitóJPEG. The output is then displayed side by side in the same html as the original.\r\n* `sample_node.js` It's a node.js script that loads a raw image in RGB format from the file system, encodes it with petitóJPEG and outputs the raw jpeg bitstream into a file.\r\n\r\n## Performance ##\r\nContemporary javascript engines have gotten very good at dealing with data in typed arrays. petitóJPEG makes exhaustive use of these. In my testing I've seen encode times of ~1000ms of 64 megapixel images on my Haswell intel core i5 using Google Chrome.\r\n\r\n### Limitations ###\r\n* images are encoded to 4:4:4 chroma sampling only. 4:2:2 and 4:2:0 should be added but it would require chroma plane downsampling making things slower\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}